# 画面遷移図・UI設計書

## 1. 画面一覧

| 画面ID | 画面名 | 説明 | URL |
|--------|--------|------|-----|
| HOME | ホーム画面 | ダッシュボード・メインメニュー | `/` |
| SHOP_LIST | 店舗一覧画面 | 店舗の一覧表示と基本操作 | `/shops` |
| SHOP_DETAIL | 店舗詳細画面 | 店舗の詳細情報表示 | `/shops/:id` |
| SHOP_EDIT | 店舗編集画面 | 店舗情報の作成・編集 | `/shops/:id/edit` |
| FLAVOR_LIST | フレーバー一覧画面 | フレーバーの一覧表示と基本操作 | `/flavors` |
| FLAVOR_DETAIL | フレーバー詳細画面 | フレーバーの詳細情報表示 | `/flavors/:id` |
| FLAVOR_EDIT | フレーバー編集画面 | フレーバー情報の作成・編集 | `/flavors/:id/edit` |

## 2. 画面遷移フロー

```
HOME
├── SHOP_LIST
│   ├── SHOP_DETAIL → SHOP_EDIT
│   └── SHOP_EDIT (新規作成)
└── FLAVOR_LIST
    ├── FLAVOR_DETAIL → FLAVOR_EDIT
    └── FLAVOR_EDIT (新規作成)
```

## 3. 各画面の詳細設計

### 3.1 HOME（ホーム画面）

#### 表示内容
- サイトタイトル・ロゴ
- 最近追加した店舗（最大5件）
- 最近追加したフレーバー（最大5件）
- 高評価フレーバー（評価4以上、最大5件）
- メインナビゲーション

#### UI要素
```
[ヘッダー]
- サイトタイトル: "シーシャ管理"

[メインコンテンツ]
- 統計情報
  - 登録店舗数: X店舗
  - 登録フレーバー数: Xフレーバー
  - 平均評価: X.X点

- 最近の活動
  - 最近追加した店舗 (5件表示)
  - 最近追加したフレーバー (5件表示)

[ナビゲーション]
- 「店舗管理」ボタン → SHOP_LIST
- 「フレーバー管理」ボタン → FLAVOR_LIST
```

#### 操作フロー
1. サイト初回アクセス時はHOME画面を表示
2. 各管理画面への遷移ボタンクリックで対応画面に遷移

### 3.2 SHOP_LIST（店舗一覧画面）

#### 表示内容
- 店舗一覧（カード形式またはテーブル形式）
- 検索・フィルター機能
- ソート機能（名前順・作成日順）

#### UI要素
```
[ヘッダー]
- パンくずナビ: HOME > 店舗一覧
- 「新しい店舗を追加」ボタン → SHOP_EDIT (新規)

[検索・フィルター]
- 検索ボックス（店舗名・住所で検索）
- ソート選択（名前順・作成日順・更新日順）

[店舗一覧]
各店舗カード:
- 店舗名
- 住所（あれば）
- 登録フレーバー数
- 「詳細」ボタン → SHOP_DETAIL
- 「編集」ボタン → SHOP_EDIT
- 「削除」ボタン → 削除確認ダイアログ
```

#### 操作フロー
1. 店舗一覧表示
2. 検索・ソート機能で絞り込み
3. 各店舗の詳細・編集・削除操作

### 3.3 SHOP_DETAIL（店舗詳細画面）

#### 表示内容
- 店舗の全情報表示
- 関連フレーバー一覧

#### UI要素
```
[ヘッダー]
- パンくずナビ: HOME > 店舗一覧 > [店舗名]
- 「編集」ボタン → SHOP_EDIT
- 「削除」ボタン → 削除確認ダイアログ

[店舗情報]
- 店舗名
- 住所
- 電話番号
- 営業時間
- ウェブサイト
- メモ
- 作成日・更新日

[関連フレーバー]
- この店舗で楽しんだフレーバー一覧
- 各フレーバーカード（名前・評価・作成日）
- 「フレーバー詳細」ボタン → FLAVOR_DETAIL
```

### 3.4 SHOP_EDIT（店舗編集画面）

#### 表示内容
- 店舗情報の入力フォーム

#### UI要素
```
[ヘッダー]
- パンくずナビ: HOME > 店舗一覧 > [新規作成/編集]

[フォーム]
- 店舗名 (必須)
- 住所 (任意)
- 電話番号 (任意)
- 営業時間 (任意)
- ウェブサイト (任意)
- メモ (任意、テキストエリア)

[操作ボタン]
- 「保存」ボタン → 保存後、SHOP_DETAIL に遷移
- 「キャンセル」ボタン → 前画面に戻る
```

#### バリデーション
- 店舗名: 必須、100文字以内
- 電話番号: 電話番号形式チェック
- ウェブサイト: URL形式チェック

### 3.5 FLAVOR_LIST（フレーバー一覧画面）

#### 表示内容
- フレーバー一覧（カード形式）
- 検索・フィルター機能
- ソート機能

#### UI要素
```
[ヘッダー]
- パンくずナビ: HOME > フレーバー一覧
- 「新しいフレーバーを追加」ボタン → FLAVOR_EDIT (新規)

[検索・フィルター]
- 検索ボックス（フレーバー名・メモで検索）
- 評価フィルター（星1-5で絞り込み）
- 店舗フィルター（ドロップダウン）
- ソート選択（評価順・名前順・作成日順）

[フレーバー一覧]
各フレーバーカード:
- フレーバー名
- 評価（星表示）
- フレーバー組み合わせ（タグ形式）
- 関連店舗名（あれば）
- メモの一部表示
- 「詳細」ボタン → FLAVOR_DETAIL
- 「編集」ボタン → FLAVOR_EDIT
- 「削除」ボタン → 削除確認ダイアログ
```

### 3.6 FLAVOR_DETAIL（フレーバー詳細画面）

#### 表示内容
- フレーバーの全情報表示

#### UI要素
```
[ヘッダー]
- パンくずナビ: HOME > フレーバー一覧 > [フレーバー名]
- 「編集」ボタン → FLAVOR_EDIT
- 「削除」ボタン → 削除確認ダイアログ

[フレーバー情報]
- フレーバー名
- 評価（大きな星表示）
- フレーバー組み合わせ（タグ表示）
- 関連店舗（リンク付き） → SHOP_DETAIL
- メモ（全文表示）
- タグ（あれば）
- 喫煙日時（あれば）
- 作成日・更新日
```

### 3.7 FLAVOR_EDIT（フレーバー編集画面）

#### 表示内容
- フレーバー情報の入力フォーム

#### UI要素
```
[ヘッダー]
- パンくずナビ: HOME > フレーバー一覧 > [新規作成/編集]

[フォーム]
- フレーバー名 (必須)
- フレーバー組み合わせ (必須)
  - 入力フィールド + 「追加」ボタン
  - 追加済みフレーバーのタグ表示（削除可能）
- 評価 (必須) - 星形で選択
- 関連店舗 (任意) - ドロップダウン
- メモ (任意) - テキストエリア
- タグ (任意) - 入力フィールド + 「追加」ボタン
- 喫煙日時 (任意) - 日時選択

[操作ボタン]
- 「保存」ボタン → 保存後、FLAVOR_DETAIL に遷移
- 「キャンセル」ボタン → 前画面に戻る
```

#### バリデーション
- フレーバー名: 必須、100文字以内
- フレーバー組み合わせ: 1つ以上必須
- 評価: 1-5の選択必須
- メモ: 1000文字以内

## 4. 共通UI要素

### 4.1 ナビゲーション
```
[グローバルナビ]
- サイトロゴ → HOME
- 店舗管理 → SHOP_LIST
- フレーバー管理 → FLAVOR_LIST
```

### 4.2 モーダル・ダイアログ
```
[削除確認ダイアログ]
- タイトル: "削除の確認"
- メッセージ: "[対象名]を削除してもよろしいですか？"
- 「削除する」ボタン（赤色）
- 「キャンセル」ボタン（グレー）
```

### 4.3 レスポンシブデザイン
- デスクトップ: 3カラム（大画面）
- タブレット: 2カラム（中画面）
- スマートフォン: 1カラム（小画面）

## 5. インタラクション設計

### 5.1 状態管理
- ローディング状態の表示
- エラー状態の表示
- 空状態（データが無い場合）の表示

### 5.2 フィードバック
- 保存成功時: トースト通知
- エラー時: エラーメッセージ表示
- バリデーションエラー: フィールド下にエラーメッセージ

### 5.3 パフォーマンス
- 大量データ時の仮想スクロール対応
- 画像遅延読み込み（将来対応）
- 検索時のデバウンス処理